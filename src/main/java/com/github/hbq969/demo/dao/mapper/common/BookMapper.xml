<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.github.hbq969.demo.dao.BookRepository">

    <select id="findByTitleContaining" resultType="com.github.hbq969.demo.dao.entity.Book">
        select id AS "id",
        title AS "title",
        category AS "category",
        author AS "author",
        publication_date AS "publicationDate",
        isbn AS "isbn"
        from books
        <where>
            <if test="title!=null and title!=''">
                <bind name="titleLike" value="'%' + title + '%'"/>
                and title like #{titleLike}
            </if>
        </where>
    </select>

    <select id="findByAuthor" resultType="com.github.hbq969.demo.dao.entity.Book">
        select id AS "id",
        title AS "title",
        category AS "category",
        author AS "author",
        publication_date AS "publicationDate",
        isbn AS "isbn"
        from books
        <where>
            <if test="author!=null and author!=''">
                <bind name="authorLike" value="'%' + author + '%'"/>
                and author like #{authorLike}
            </if>
        </where>
    </select>

    <select id="findByCategory" resultType="com.github.hbq969.demo.dao.entity.Book">
        select id AS "id",
        title AS "title",
        category AS "category",
        author AS "author",
        publication_date AS "publicationDate",
        isbn AS "isbn"
        from books
        <where>
            <if test="category!=null and category!=''">
                <bind name="categoryLike" value="'%' + category + '%'"/>
                and category like #{categoryLike}
            </if>
        </where>
    </select>
</mapper>